<ons-page>






<ons-toolbar class="toolbar" modifier="android">
          <div class="left">
              <ons-toolbar-button ng-click="back()">
                  <ons-icon icon="ion-arrow-left-c"></ons-icon>
              </ons-toolbar-button>
          </div>
          <div class="center">
              Replies to {{ userRepliesReview.fname }}'s Review
          </div>
</ons-toolbar>





<ons-list-item class="list-item-container">
          <ons-row>
          <ons-col width="80px">
          <img src="assets/img/user.png" alt="" style="width: 50px;height: 50px" ng-click="goToUserProfile(review.rvwpostedby)">
          </ons-col>
              <ons-col>

                <div class="rpuser">
                 <b>{{ userRepliesReview.fname + ' ' + userRepliesReview.lname }}</b>
                 <span style="opacity: 0.5;font-size: 0.90em">{{ '@' + userRepliesReview.username }}</span>


              

                </div>
                

                  
                  <span style="font-size: 10px;color: #A7A7A7">
                    
                    <div ng-if="userRepliesReview.date_edited == '0000-00-00 00:00:00'">
                    <ons-icon icon="ion-android-time"></ons-icon>
                      posted <span am-time-ago="userRepliesReview.date_reviewed"></span>
                    </div>
                    <div ng-if="userRepliesReview.date_edited != '0000-00-00 00:00:00'">
                    <ons-icon icon="ion-android-time"></ons-icon>
                      updated <span am-time-ago="userRepliesReview.date_edited"></span>
                    </div>
                    
                  </span>

                  <div ng-init="(userRating = []).length = (userRepliesReview.rating | number: 0);(noUserRating = []).length = 5 - userRating.length" style="display: block">

                      <ons-icon icon="ion-android-star" ng-repeat="i in userRating track by $index" size="18px" class="rating-star"></ons-icon>
                      <span style="margin-left: -4px"></span>
                      <ons-icon icon="ion-android-star" class="no-rating-star" size="18px" ng-repeat="i in noUserRating track by $index"></ons-icon>
                  </div> 
                  <!-- <div style="font-size: 0.95em" ng-init="">
                    {{ review.rating }}
                     <span style=""> 
                     
                        <ons-icon icon="ion-android-star" class="rating-star" ng-repeat="i in starRating track by $index" size="18px"></ons-icon>
                        <span style="margin-left: -4px"></span>
                        <ons-icon icon="ion-android-star" class="no-rating-star" size="18px" ng-repeat="i in noStarRating track by $index"></ons-icon>
                      </span>  
               
                  </div> -->
                  
                 

                  <div style="font-size: 0.90em;">
                  {{ userRepliesReview.review_content }} 
                  </div>

               
            </div>
                
              </ons-col>
          </ons-row>
        </ons-list-item>
       </div>
</ons-list>




<h4 style="text-align: center;color: #636556; font-size: 13px">
<span ng-show="userReplies.length > 0 && userReplies.length > 1">
{{ userReplies.length }} replies to {{ userRepliesReview.fname }}'s Review
</span>

<span ng-show="userReplies.length == 0">
   There's no reply to {{ userRepliesReview.fname }}'s Review
</span>

<span ng-show="userReplies.length > 0 && userReplies.length == 1">
    {{ userReplies.length }} reply to {{ userRepliesReview.fname }}'s Review
</span>
</h4>
<div style="font-size: 10px !important;" ng-show="userReplies.length > 0">
    
  
      <ons-list style="">
       <div ng-repeat="reply in userReplies">
          <ons-list-item class="list-item-container">
          <ons-row>
          <ons-col width="80px">
          <img src="assets/img/user.png" alt="" style="width: 30px;height: 30px" ng-click="goToUserProfile(review.rvwpostedby)">
          </ons-col>
              <ons-col>
                

                <div class="rpuser">
                 <b>{{ reply.fname + ' ' + reply.lname }}</b>
                <!--  <span style="opacity: 0.5;font-size: 0.90em">{{ '@' + review.username }}</span>
 -->

                <ons-icon icon="ion-android-more-vertical" style="float: right;margin-right: 5px" ng-if="review.username == loggedUsername" id="editDeleteReview" ng-click="showEditDeleteReview(review.rating,review.review_content,review.review_id)"></ons-icon>

                </div>
                

                  
                  <span style="font-size: 10px;color: #A7A7A7">
                    <div ng-if="reply.date_edited == '0000-00-00 00:00:00'">
                    <ons-icon icon="ion-android-time"></ons-icon>
                      replied <span am-time-ago="reply.date_replied"></span>
                    </div>
                    <div ng-if="reply.date_edited != '0000-00-00 00:00:00'">
                    <ons-icon icon="ion-android-time"></ons-icon>
                      supdated <span am-time-ago="reply.date_edited"></span>
                    </div>
                    
                  </span>

             
                 

                  <div style="font-size: 0.90em;">
                  {{ reply.reply_content }} 
                  </div>
            </div>
                
              </ons-col>
          </ons-row>
        </ons-list-item>
       </div>
      </ons-list>

      
</div>





  
 <ons-bottom-toolbar style="background: #ffffff">
  <div ng-if="userReplies[0].username == loggedUsername">

    <input type="text" class="text-input--underbar"
    placeholder="Wait for someone to reply to you" value="" style="margin-left: 10px;display:inline;width: 85%;" disabled >
   <!--  <textarea class="textarea--transparent" ng-model="userreview" placeholder="Write a review for this recipe" style="width: 85%;float:left">
    </textarea> -->
    <ons-icon icon="ion-android-send" style="display: inline;float: right;margin-top: 10px;margin-right: 10px;color: #999999"></ons-icon>
  </div>
  <div ng-if="userReplies[0].username != loggedUsername">
   <input type="text" class="text-input--underbar" ng-model="reply"
    placeholder="Type in something to reply" value="" style="margin-left: 10px;display:inline;width: 85%;" >
   <!--  <textarea class="textarea--transparent" ng-model="userreview" placeholder="Write a review for this recipe" style="width: 85%;float:left">
    </textarea> -->
    <ons-icon icon="ion-android-send" style="display: inline;float: right;margin-top: 10px;margin-right: 10px;color: black" ng-click="addReply(reply,userRepliesReview);"></ons-icon>
  </div>

 </ons-bottom-toolbar>


</ons-page>